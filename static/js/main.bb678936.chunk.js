(this["webpackJsonpwoven-images"]=this["webpackJsonpwoven-images"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a,r,s,i,c=n(1),l=n.n(c),o=n(49),d=n.n(o),u=(n(54),n(5)),h=n(3),T=n(2),E=(n(55),n(56),n(0)),x=function(e){var t=Object(c.useRef)(null),n=l.a.useRef(null);return Object(c.useEffect)((function(){if(t.current){n.current=t.current.getContext("2d");var a=n.current;if(a.fillStyle=e.backgroundClearColor,a.clearRect(0,0,t.current.width,t.current.height),a.fillRect(0,0,t.current.width,t.current.height),e.drawingInstructions.forEach((function(e){a&&(a.beginPath(),e(a),a.fill())})),a){var r=a.createPattern(t.current,"repeat");null===r||void 0===r||r.setTransform((new DOMMatrix).scaleSelf(1/e.repetitions,1/e.repetitions,0,0)),r&&(a.fillStyle=r,a.fillRect(0,0,t.current.width,t.current.height))}}}),[e]),Object(E.jsx)("canvas",{className:"Canvas",width:e.dimensions.x,height:e.dimensions.y,ref:t})},f=(n(58),function(e){var t={gridRow:e.row+1,gridColumn:e.col+1};return e.thread&&(t.backgroundColor=e.thread.dataSource.color),Object(E.jsx)("div",{className:"button "+(e.value?"isActive":""),style:t,onClick:e.onClickHandler})}),S=(n(32),function(e){var t=function(t){e.onClickHandler(t,e.subGridType)},n=e.gridValues.map((function(n,a){return n.map((function(n,r){return Object(E.jsx)(f,{value:n,row:a,col:r,cellSize:e.cellSize,onClickHandler:t})}))}));return Object(E.jsx)("div",{className:"ButtonGrid",style:{gridTemplateRows:"repeat(1fr, ".concat(e.gridValues.length,")"),gridTemplateColumns:"repeat(1fr, ".concat(e.gridValues[0].length,")"),width:"".concat(e.gridValues[0].length*e.cellSize,"px"),height:"".concat(e.gridValues.length*e.cellSize,"px")},children:n})});!function(e){e[e.WARPTHREADTABLE=0]="WARPTHREADTABLE",e[e.WEFTTHREADTABLE=1]="WEFTTHREADTABLE",e[e.TIEUPTABLE=2]="TIEUPTABLE",e[e.HARNESSTOTHREADTABLE=3]="HARNESSTOTHREADTABLE",e[e.TREADLINGTABLE=4]="TREADLINGTABLE"}(a||(a={})),function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL"}(r||(r={})),function(e){e[e.SET_WARPCOUNT=0]="SET_WARPCOUNT",e[e.SET_WEFTCOUNT=1]="SET_WEFTCOUNT",e[e.SET_TREADLECOUNT=2]="SET_TREADLECOUNT",e[e.SET_HARNESSCOUNT=3]="SET_HARNESSCOUNT"}(s||(s={})),function(e){e[e.SET_HARNESSTOTHREADATTACHMENTS=0]="SET_HARNESSTOTHREADATTACHMENTS",e[e.SET_TREADLETOHARNESSATTACHMENTS=1]="SET_TREADLETOHARNESSATTACHMENTS",e[e.SET_TREADLINGINSTRUCTION=2]="SET_TREADLINGINSTRUCTION",e[e.SET_HARNESSCOUNT=3]="SET_HARNESSCOUNT",e[e.SET_TREADLECOUNT=4]="SET_TREADLECOUNT",e[e.SET_WEFTCOUNT=5]="SET_WEFTCOUNT",e[e.SET_WARPCOUNT=6]="SET_WARPCOUNT",e[e.SET_STATE=7]="SET_STATE",e[e.SET_WARPTHREADDATASOURCE=8]="SET_WARPTHREADDATASOURCE",e[e.SET_WEFTTHREADDATASOURCE=9]="SET_WEFTTHREADDATASOURCE",e[e.SET_SELECTEDTHREADDATASOURCEINDEX=10]="SET_SELECTEDTHREADDATASOURCEINDEX",e[e.SET_SELECTEDTHREADDATASOURCE=11]="SET_SELECTEDTHREADDATASOURCE",e[e.ADD_THREADDATASOURCE=12]="ADD_THREADDATASOURCE"}(i||(i={}));var j=n(10),O=n(141).v4,A=n(11),b={harnessCount:4,treadleCount:4,warpCount:16,weftCount:16},p="#000000",g="#FFFFFF",m={id:0,dataSource:{color:p}},C={id:0,dataSource:{color:g}};var N=function(){return{threads:new Set}},w=function(){return{harnesses:new Set}},v=function(e,t){return{id:e,dataSource:{color:t}}};function D(e){var t=e.data,n=t.threading,a=t.tieup,r=t.treadling,s=function(e){var t=/(\d+)/g,n=e.match(t);return n?n.map((function(e){return parseInt(e)})):[]}(a);return{warpCount:n.split(",").length,weftCount:R(r).split(",").length,treadleCount:a.split(",").length,harnessCount:Math.max.apply(Math,Object(j.a)(s))}}function R(e){var t=e.replaceAll(/(\d+)x(\d+)/g,(function(e,t,n){return(t+",").repeat(n)}));return(t=t.replaceAll(/,,/g,",")).endsWith(",")&&(t=t.substring(0,t.length-1)),t}function I(e){return{color:e}}function y(){return O()}function H(e){var t,n,a,r;return{id:y(),dimensions:e,harnesses:(r=e.harnessCount,new Array(r).fill(N()).map((function(e){return N()}))),warpThreads:(a=e.warpCount,new Array(a).fill(m).map((function(e,t){return v(t,p)}))),weftThreads:function(e){return new Array(e).fill(C).map((function(e,t){return v(t,g)}))}(e.weftCount),treadles:(n=e.treadleCount,new Array(n).fill(w()).map((function(e){return w()}))),treadlingInstructions:(t=e.weftCount,new Array(t).fill(null)),threadDataSource:{color:"#FFFFFF"},name:"untitled",indexedThreadPalette:A(_)}}var L=function(e){return JSON.stringify({id:e.id,dimensions:e.dimensions,treadles:P(e.treadles,e.harnesses),harnesses:P(e.harnesses,e.warpThreads),treadlingInstructions:e.treadlingInstructions.map((function(t){return t?e.treadles.indexOf(t):-1})),warpThreads:e.warpThreads,weftThreads:e.weftThreads,threadDataSource:e.threadDataSource,name:e.name,indexedThreadPalette:e.indexedThreadPalette})};function P(e,t){var n=[];return e.forEach((function(e,a){n.push([]),"harnesses"in e?e.harnesses.forEach((function(e){n[a].push(t.indexOf(e))})):"threads"in e&&e.threads.forEach((function(e){n[a].push(t.indexOf(e))}))})),n}var _={threadPalette:[I("#FFFFFF"),I("#000000")],selectedIndex:0};n(130),n(131);var k=function(e){var t=Object(c.useState)(e.dimensions),n=Object(T.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){r(e.dimensions)}),[e.dimensions]);var s=function(e){e.preventDefault(),r(Object(h.a)(Object(h.a)({},a),{},Object(u.a)({},e.target.name,e.target.value)))},i=Object.keys(e.dimensions).map((function(t){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("label",{className:"InputLabel",htmlFor:t,children:(n=t,a=" ",a="undefined"===typeof a?"_":a,n.replace(/([a-z\d])([A-Z])/g,"$1"+a+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+a+"$2").toLowerCase()+" ")}),Object(E.jsx)("input",{className:"InputField",style:{display:"inline"},type:"textfield",name:t,onChange:s,placeholder:e.dimensions[t].toString()}),Object(E.jsx)("p",{className:"CurrentDimension",style:{display:"inline"},children:"\u2192 ".concat(e.dimensions[t])}),Object(E.jsx)("br",{})]});var n,a}));return Object(E.jsxs)("div",{className:"Panel",children:[Object(E.jsx)("h1",{className:"FormHeader",children:"Dimensions Editor"}),Object(E.jsx)("div",{className:"PanelContent",children:Object(E.jsxs)("form",{className:"DimensionsForm",onSubmit:function(t){t.preventDefault(),e.onDimensionsChange(a)},children:[i,Object(E.jsx)("button",{className:"ApplyBtn",type:"submit",children:"Apply"})]})})]})},U=(n(132),n(11),function(e){var t=Object(c.useState)(I("000000")),n=Object(T.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!0),i=Object(T.a)(s,2),l=i[0],o=i[1],d=e.indexedThreadPalette.threadPalette.map((function(t,n){var a="Thread"+(n==e.indexedThreadPalette.selectedIndex?" selected":"");return Object(E.jsx)("div",{className:a,id:"thread-"+n.toString(),style:{backgroundColor:t.color},onClick:function(t){e.onSelectThreadDataSource(t.target.id.split("-")[1])}})}));return Object(E.jsxs)("div",{className:"ThreadEditorContainer Panel",children:[Object(E.jsx)("h1",{children:"Thread Palette"}),Object(E.jsxs)("div",{className:"PanelContent",children:[Object(E.jsxs)("div",{className:"ThreadContainer",children:[d,Object(E.jsx)("button",{className:"AddThreadButton",onClick:function(t){e.onAddThreadDataSource(a)},children:"+"})]}),Object(E.jsx)("div",{className:"ThreadAttributeDesigner",children:Object(E.jsx)("input",{className:"ColorPicker",type:"color",id:"ColorPicker",onChange:function(t){if(!l){var n=Object(h.a)(Object(h.a)({},e.indexedThreadPalette.threadPalette[e.indexedThreadPalette.selectedIndex]),{},{color:t.target.value});e.onSetThreadDataSource(n)}r(Object(h.a)(Object(h.a)({},a),{},{color:t.target.value}))}})}),Object(E.jsx)("button",{className:"LockBtn",onClick:function(){o(!l)},children:l?"Unlock Palette":"Lock Palette"})]})]})}),F=function(e){var t=function(t){e.onClickHandler(t,e.subGridType)},n=e.gridValues.map((function(n,a){return Object(E.jsx)(f,{styleDataSource:n.dataSource,col:e.orientation===r.HORIZONTAL?a:0,row:e.orientation===r.VERTICAL?a:0,cellSize:{width:e.cellSize.width,height:e.cellSize.height},onClickHandler:t,thread:e.gridValues[a]})}));return Object(E.jsx)("div",{className:"ButtonGrid",style:{gridTemplateColumns:"repeat(1fr, ".concat(e.orientation===r.VERTICAL?e.gridValues.length:1,")"),gridTemplateRows:"repeat(1fr, ".concat(e.orientation===r.HORIZONTAL?e.gridValues.length:1,")"),width:"".concat((e.orientation===r.HORIZONTAL?e.gridValues.length:1)*e.cellSize.width,"px"),height:"".concat((e.orientation===r.VERTICAL?e.gridValues.length:1)*e.cellSize.height,"px")},children:n})},B=function(e){return Object(E.jsxs)("div",{className:"Panel",children:[Object(E.jsx)("h1",{className:"FormHeader",children:"Image Editor"}),Object(E.jsx)("div",{className:"PanelContent",children:e.children})]})},W=n(11);function V(e,t){var n=W(e);switch(t.type){case i.SET_HARNESSTOTHREADATTACHMENTS:var a=n.harnesses[t.harnessID],r=n.warpThreads[t.threadID];if(a.threads.has(r))a.threads.delete(r);else{for(var s=0;s<n.harnesses.length;s++)n.harnesses[s].threads.has(r)&&n.harnesses[s].threads.delete(r);a.threads.add(r)}break;case i.SET_TREADLETOHARNESSATTACHMENTS:var c=n.treadles[t.treadleID],l=n.harnesses[t.harnessID];c.harnesses.has(l)?c.harnesses.delete(l):c.harnesses.add(l);break;case i.SET_TREADLINGINSTRUCTION:var o=n.treadles[t.treadleID];n.treadlingInstructions[t.instructionIndex]===o?n.treadlingInstructions[t.instructionIndex]=null:n.treadlingInstructions[t.instructionIndex]=o;break;case i.SET_HARNESSCOUNT:if(t.harnessCount>n.harnesses.length)for(;n.harnesses.length<t.harnessCount;)n.harnesses.unshift(N());else{var d=n.harnesses.splice(0,n.harnesses.length-t.harnessCount);n.treadles.forEach((function(e){d.forEach((function(t){e.harnesses.delete(t)}))}))}n.dimensions.harnessCount=t.harnessCount;break;case i.SET_TREADLECOUNT:if(t.treadleCount>n.treadles.length)for(;n.treadles.length<t.treadleCount;)n.treadles.push(w());else{var u=n.treadles.splice(t.treadleCount);n.treadlingInstructions.forEach((function(e){u.forEach((function(t){e=e===t?null:e}))}))}n.dimensions.treadleCount=t.treadleCount;break;case i.SET_WARPCOUNT:if(t.warpCount>e.warpThreads.length)for(;n.warpThreads.length<t.warpCount;)n.warpThreads.unshift(v(n.warpThreads.length,p));else n.warpThreads.splice(0,n.warpThreads.length-t.warpCount);n.warpThreads.forEach((function(e,t){e.id=t})),n.dimensions.warpCount=t.warpCount;break;case i.SET_WEFTCOUNT:if(t.weftCount>e.weftThreads.length)for(;n.weftThreads.length<t.weftCount;)n.weftThreads.push(v(n.weftThreads.length,g)),n.treadlingInstructions.push(null);else n.weftThreads.splice(t.weftCount),n.treadlingInstructions.splice(t.weftCount);n.dimensions.weftCount=t.weftCount;break;case i.SET_STATE:return t.state;case i.SET_WARPTHREADDATASOURCE:n.warpThreads[t.warpThreadID].dataSource=n.indexedThreadPalette.threadPalette[n.indexedThreadPalette.selectedIndex];break;case i.SET_WEFTTHREADDATASOURCE:n.weftThreads[t.weftThreadID].dataSource=n.indexedThreadPalette.threadPalette[n.indexedThreadPalette.selectedIndex];break;case i.SET_SELECTEDTHREADDATASOURCE:n.indexedThreadPalette.threadPalette[n.indexedThreadPalette.selectedIndex]=t.dataSource;break;case i.ADD_THREADDATASOURCE:n.indexedThreadPalette.threadPalette.push(W(t.dataSource));break;case i.SET_SELECTEDTHREADDATASOURCEINDEX:n.indexedThreadPalette.selectedIndex=t.dataSourceIndex}return n}var M=function(e){var t=Object(c.useReducer)(V,H(b)),n=Object(T.a)(t,2),s=n[0],l=n[1],o=Object(c.useState)(16),d=Object(T.a)(o,2),u=d[0],h=d[1],f=Object(c.useState)(1),j=Object(T.a)(f,2),O=j[0],A=j[1],p=Object(c.useState)(100),g=Object(T.a)(p,2),m=g[0],C=g[1],N=Object(c.useState)("#000000"),w=Object(T.a)(N,2),v=w[0],D=w[1];Object(c.useEffect)((function(){l({type:i.SET_STATE,state:e.currentState})}),[e.currentState]),Object(c.useEffect)((function(){e.onChange(s)}),[s]);var R,I,y,L,P=function(e,t){var n=e.target,r=parseInt(n.style.gridRow)-1,s=parseInt(n.style.gridColumn)-1;switch(t){case a.HARNESSTOTHREADTABLE:l({type:i.SET_HARNESSTOTHREADATTACHMENTS,harnessID:r,threadID:s});break;case a.TIEUPTABLE:l({type:i.SET_TREADLETOHARNESSATTACHMENTS,treadleID:s,harnessID:r});break;case a.TREADLINGTABLE:l({type:i.SET_TREADLINGINSTRUCTION,treadleID:s,instructionIndex:r});break;case a.WEFTTHREADTABLE:l({type:i.SET_WEFTTHREADDATASOURCE,weftThreadID:r});break;case a.WARPTHREADTABLE:l({type:i.SET_WARPTHREADDATASOURCE,warpThreadID:s})}};return Object(E.jsxs)("div",{className:"LoomEditorContainer",children:[Object(E.jsx)("div",{className:"LoomPane",children:Object(E.jsxs)("div",{className:"LoomContainer",children:[Object(E.jsx)(F,{subGridType:a.WARPTHREADTABLE,cellSize:{width:u,height:u/2},gridValues:s.warpThreads,orientation:r.HORIZONTAL,onClickHandler:P}),Object(E.jsx)("span",{className:"void",children:"\xa0"}),Object(E.jsx)("span",{className:"void",children:"\xa0"}),Object(E.jsx)(S,{subGridType:a.HARNESSTOTHREADTABLE,cellSize:u,gridValues:(y=s.warpThreads,L=s.harnesses,new Array(L.length).fill(new Array).map((function(e,t){return new Array(y.length).fill(!1).map((function(e,n){return L[t].threads.has(y[n])}))}))),onClickHandler:P}),Object(E.jsx)(S,{subGridType:a.TIEUPTABLE,cellSize:u,gridValues:function(e,t){return new Array(e.length).fill(new Array).map((function(n,a){return new Array(t.length).fill(!1).map((function(n,r){return t[r].harnesses.has(e[a])}))}))}(s.harnesses,s.treadles),onClickHandler:P}),Object(E.jsx)("span",{className:"void",children:"\xa0"}),Object(E.jsx)(x,{repetitions:O,dimensions:{x:s.dimensions.warpCount*u,y:s.dimensions.weftCount*u},drawingInstructions:function(e){var t=[],n=u,a=n-u*(m/100);return e.warpThreads.forEach((function(r,s){var i,c,l,o;t.push((i=s*n+a,c=n-a,l=e.weftThreads.length*n,o=r.dataSource.color,function(e){e.rect(i,0,c,l),e.fillStyle=o}))})),e.weftThreads.forEach((function(r,s){var i,c,l,o;t.push((i=s*n+a,c=e.warpThreads.length*n,l=n-a,o=r.dataSource.color,function(e){e.rect(0,i,c,l),e.fillStyle=o}))})),e.treadlingInstructions.forEach((function(e,r){e&&e.harnesses.forEach((function(e){e.threads.forEach((function(e){var s,i,c,l,o;t.push((s=e.id*n+a,i=r*n,c=n-a,l=n+a,o=e.dataSource.color,function(e){e.rect(s,i,c,l),e.fillStyle=o}))}))}))})),t}(s),backgroundClearColor:v}),Object(E.jsx)(S,{subGridType:a.TREADLINGTABLE,cellSize:u,gridValues:(R=s.treadles,I=s.treadlingInstructions,new Array(I.length).fill(new Array).map((function(e,t){return new Array(R.length).fill(!1).map((function(e,n){return I[t]===R[n]}))}))),onClickHandler:P}),Object(E.jsx)(F,{subGridType:a.WEFTTHREADTABLE,cellSize:{width:u/2,height:u},gridValues:s.weftThreads,orientation:r.VERTICAL,onClickHandler:P})]})}),Object(E.jsxs)("div",{className:"EditorPanes",children:[Object(E.jsx)(k,{dimensions:s.dimensions,onDimensionsChange:function(e){l({type:i.SET_HARNESSCOUNT,harnessCount:e.harnessCount}),l({type:i.SET_TREADLECOUNT,treadleCount:e.treadleCount}),l({type:i.SET_WARPCOUNT,warpCount:e.warpCount}),l({type:i.SET_WEFTCOUNT,weftCount:e.weftCount})}}),Object(E.jsx)(B,{children:Object(E.jsxs)("form",{className:"ImageEditorForm",children:[Object(E.jsx)("label",{style:{verticalAlign:"top"},htmlFor:"cellSize",children:"cell size "}),Object(E.jsx)("input",{type:"range",min:"2",max:"16",defaultValue:"16",id:"cellSizeSlider",onChange:function(e){var t=e.target;return h(parseInt(t.value))}}),Object(E.jsx)("br",{}),Object(E.jsx)("label",{style:{verticalAlign:"top"},htmlFor:"scaleSlider",children:"scale "}),Object(E.jsx)("input",{type:"range",min:"1",max:"16",defaultValue:"1",id:"scaleSlider",onChange:function(e){var t=e.target;return A(parseInt(t.value))}}),Object(E.jsx)("br",{}),Object(E.jsx)("label",{style:{verticalAlign:"top"},htmlFor:"threadWidthSlider",children:"thread width "}),Object(E.jsx)("input",{type:"range",min:"0",max:"100",defaultValue:"100",id:"threadWidthSlider",onChange:function(e){var t=e.target;return C(parseInt(t.value))}}),Object(E.jsx)("br",{}),Object(E.jsx)("label",{style:{verticalAlign:"top"},htmlFor:"threadWidthSlider",children:"background color "}),Object(E.jsx)("input",{type:"color",defaultValue:"#000000",id:"background",className:"ColorPicker",onChange:function(e){var t=e.target;return D(t.value)}}),Object(E.jsx)("br",{})]})}),Object(E.jsx)(U,{onSelectThreadDataSource:function(e){l({type:i.SET_SELECTEDTHREADDATASOURCEINDEX,dataSourceIndex:e})},onSetThreadDataSource:function(e){l({type:i.SET_SELECTEDTHREADDATASOURCE,dataSource:e})},onAddThreadDataSource:function(e){l({type:i.ADD_THREADDATASOURCE,dataSource:e})},indexedThreadPalette:s.indexedThreadPalette})]})]})},z=(n(133),function(e){return Object(E.jsxs)("div",{className:"ToolBarMenu",children:[Object(E.jsx)("div",{className:"ToolBarMenuName",children:e.name}),Object(E.jsx)("div",{className:"ToolBarMenuChildren",children:e.children})]})}),G=(n(134),function(e){return Object(E.jsxs)("div",{onClick:e.onClick,className:e.className?e.className:"ToolBarMenuNode",children:[Object(E.jsx)("span",{children:e.text}),Object(E.jsx)("div",{className:"ToolBarMenuSubNodes "+(e.children?"populated":""),children:e.children})]})}),Z=[{name:"Basic Twill",data:{threading:"1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4",tieup:"1+4,1+2,2+3,3+4",treadling:"1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4"}},{name:"Periwinkle",data:{threading:"3,2,1,4,3,2,1,4,3,4,3,2,3,2,1,4,3,4,1,2,3,2,3,4,3,4,1,2",tieup:"1+4,1+2,2+3,3+4",treadling:"3,2,1,4x3,3x3,2,1,4x2,1,2,3x3,4x3,1,2,3"}},{name:"Diadem",data:{threading:"4,1,2,3,4,1,2,3,4,1,2,3,2,3,2,1,4,3,4,3,4,1,2,3,2,3,2,1,4,3,2,1,4,3,2,1,4,1",tieup:"1+4,1+2,2+3,3+4",treadling:"3x2,4,1,2,3,4,1,2,3,4,1x4,4,3,2x4,3,4,1x4,4,3,2,1,4,3,2,1,4,3x2"}},{name:"Rings and Chains",data:{threading:"1,2,3,4,1,2,3,4,1,2,3,4,1,4,1,4,3,4,3,2,3,2,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,4,1,2,1,2,3,2,3,4,3,4,1,4,1,4,3,2,1,4,1,2,3,4",tieup:"1+4,1+2,2+3,3+4",treadling:"1,2,3,4,1x4,4x3,3x3,2x3,1x2,2x2,1x2,2x2,1x2,2x2,1x2,2x2,1x2,2x2,1x2,2x3,3x3,4x3,1x4,4,3,2,1"}},{name:"Wheel of Fortune",data:{threading:"1,2,3,4,1,2,1,2,3,2,3,4,3,4,1,4,3,4,1,4,3,4,3,2,3,2,1,2,1,4,3,2,1,4,3,2,1,4,3,2,3,2,1,2,1,4,1,4,3,4,1,4,3,4,1,4,1,2,1,2,3,2,3,4,1,2,3,4",tieup:"1+4,1+2,2+3,3+4",treadling:"2,3,4,1,2x3,3x3,4x3,1x2,4x2,1x2,4x3,3x3,2x3,1,4,3,2,1,4,3,2,1,4,3x3,2x3,1x3,4x2,1x2,4x2,1x3,2x3,3x3,4,1,2,3,4,1"}},{name:"Chariot Wheel No. 3",data:{threading:"4,3,2,1,4,3,2,3,4,3,2,3,4,1,4,1,4,1,2,1,2,1,4,1,2,1,4,1,2,1,2,1,4,1,4,1,4,3,2,3,4,3,2,3,4,1,2,3",tieup:"1+4,1+2,2+3,3+4",treadling:"4,3,2,1,4,3x2,4x2,3x2,4,1x5,2x4,1x2,2x2,1x2,2x4,1x5,4,3x2,4x2,3x2,4,1,2,3,4"}},{name:"Chariot Wheel No. 3 Alt",data:{threading:"4,3,2,1,4,3,2,3,4,3,2,3,4,1,4,1,4,1,2,1,2,1,4,1,2,1,4,1,2,1,2,1,4,1,4,1,4,3,2,3,4,3,2,3,4,1,2,3",tieup:"1+4,1+2,2+3,3+4",treadling:"3,4,1,2,3,4x2,3x2,4x2,3,2x5,1x4,2x2,1x2,2x2,1x4,2x5,3,4x2,3x2,4x2,3,2,1,4,3"}},{name:"Church Windows",data:{threading:"3,2,1,4,3,4,3,4,1,4,1,2,1,4,1,4,3,4,3,4,1,2,3,2,1,2,3,2,1,2,3,2,1,2,3,2,1,2,3,2,1,2,3,2,1,4,3,4,3,4,1,4,1,2,1,4,1,4,3,4,3,4,2,1",tieup:"1+4,1+2,2+3,3+4",treadling:"3,2,1,4x4,1x3,2x2,1x3,4x4,1,2,3x2,2x2,3x2,2x2,3x2,2x2,3x2,2x2,3x2,2x2,3x2,2,1,4x4,1x3,2x2,1x3,4x4,1,2,3"}},{name:"Cambridge Beauty",data:{threading:"2,3,4,1,4,1,4,1,4,3,4,3,4,3,2,3,2,3,2,1,2,1,2,1,2,3,4,3,2,1,2,3,4,3,2,1,2,3,4,3,2,1,2,3,4,3,2,1,2,1,2,1,2,3,2,3,2,3,4,3,4,3,4,1,4,1,4,1,4,3",tieup:"1+4,1+2,2+3,3+4",treadling:"3,4,1x6,4x5,3x5,2x6,3,4x2,3,2x2,3,4x2,3,2x2,3,4x2,3,2x2,3,4x2,3,2x2,3,4x2,3,2x6,3x5,4x5,1x6,4,3"}},{name:"Star of Bethlehem",data:{threading:"2,3,4,1,2,3,4,1,2,3,4,1,2,1,2,3,2,3,4,3,4,1,4,1,2,3,4,1,4,3,2,1,4,1,4,3,4,3,2,3,2,1,2,1,4,3,2,1",tieup:"1+4,1+2,2+3,3+4",treadling:"2,3,4,1,2,3,4,1,2,3,4,1,2x3,3x3,4x3,1x3,1,2,3,4,1x2,4,3,2,1x3,4x3,3x3,2x3,1,4,3,2"}},{name:"Maltese Cross",data:{threading:"1,2,3,4,1,2,3,4,1,2,3,4,1,2,1,4,1,4,3,4,3,2,3,2,1,2,1,4,1,2,1,4,1,2,1,2,3,2,3,4,3,4,1,4,1,2,1,4,3,2",tieup:"1+4,1+2,2+3,3+4",treadling:"2,1,4,3,2,1,4,3,2x2,3x3,4x3,1x3,2x3,3x2,2x2,3x2,2x3,1x3,4x3,3x3,2x2,3,4,1,2"}}],J=function(e){var t,n=Object.keys(e.saveStateDict).map((function(t){return n=t,Object(E.jsx)(G,{className:"ToolBarMenuSubNode",text:e.saveStateNames[n],onClick:function(){return e.onLoad(n)}});var n}));return Object(E.jsxs)(z,{name:"File",children:[Object(E.jsx)(G,{text:"Create New",onClick:function(){return console.log("create new")}}),Object(E.jsx)(G,{text:"Save",onClick:function(){e.onSave()}}),Object(E.jsx)(G,{text:"Save As",onClick:function(){e.onSaveAs()}}),Object(E.jsx)(G,{text:"Load",children:Object(j.a)(n)}),Object(E.jsx)(G,{text:"Load Preset",children:Object(j.a)((t=Z,t.map((function(e){return function(e){var t=H(D(e)),n=e.data,a=n.threading,r=n.tieup,s=n.treadling;return a.split(",").map((function(e){return parseInt(e)})).forEach((function(e,n){t.harnesses[e-1].threads.add(t.warpThreads[n])})),r.split(",").map((function(e){return e.split("+").map((function(e){return parseInt(e)}))})).forEach((function(e,n){e.forEach((function(e){var a=t.harnesses.length-1-(e-1);t.treadles[n].harnesses.add(t.harnesses[a])}))})),R(s).split(",").map((function(e){return parseInt(e)})).forEach((function(e,n){t.treadlingInstructions[n]=t.treadles[e-1]})),t.name=e.name,t}(e)})).map((function(t,n){return function(t){return Object(E.jsx)(G,{className:"ToolBarMenuSubNode",text:t.name,onClick:function(){return e.onLoadPreset(t)}})}(t)}))))})]})};var X=function(e,t){var n=function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.warn("Error reading localStorage key \u201c".concat(e,"\u201d:"),a),t}},a=Object(c.useState)(n),r=Object(T.a)(a,2),s=r[0],i=r[1];return Object(c.useEffect)((function(){i(n())}),[]),Object(c.useEffect)((function(){var e=function(){i(n())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[s,function(t){"undefined"==typeof window&&console.warn("Tried setting localStorage key \u201c".concat(e,"\u201d even though environment is not a client"));try{var n=t instanceof Function?t(s):t;window.localStorage.setItem(e,JSON.stringify(n)),i(n),window.dispatchEvent(new Event("local-storage"))}catch(a){console.warn("Error setting localStorage key \u201c".concat(e,"\u201d:"),a)}}]},$=(n(135),function(e){return Object(E.jsx)("div",{className:"DialogContainer",children:Object(E.jsx)("div",{className:"DialogBox",children:e.children})})}),q=n(11),K=function(){var e=X("saveStates",{}),t=Object(T.a)(e,2),n=t[0],a=t[1],r=X("saveStateNames",{}),s=Object(T.a)(r,2),i=s[0],l=s[1],o=H(b),d=Object(c.useState)(o),x=Object(T.a)(d,2),f=x[0],S=x[1],j=Object(c.useState)(!1),O=Object(T.a)(j,2),A=O[0],p=O[1],g=Object(c.useState)(f),m=Object(T.a)(g,2),C=m[0],v=m[1];return Object(E.jsxs)("div",{className:"Container",children:[Object(E.jsx)(J,{saveStateDict:n,saveStateNames:i,onLoad:function(e){var t=function(e){var t=JSON.parse(e);return t.harnesses=t.harnesses.map((function(e){var n=N();return e.forEach((function(e){n.threads.add(t.warpThreads[e])})),n})),t.treadles=t.treadles.map((function(e){var n=w();return e.forEach((function(e){n.harnesses.add(t.harnesses[e])})),n})),t.treadlingInstructions=t.treadlingInstructions.map((function(e){return t.treadles[e]})),t}(n[e]);S(t)},onLoadPreset:function(e){S(e)},onSaveAs:function(){p(!0)},onSave:function(){var e=L(C);a(Object(h.a)(Object(h.a)({},n),{},Object(u.a)({},C.id,e))),l(Object(h.a)(Object(h.a)({},i),{},Object(u.a)({},C.id,C.name)))}}),Object(E.jsx)(M,{currentState:f,onChange:function(e){v(e)}}),A&&Object(E.jsx)($,{children:Object(E.jsxs)("form",{className:"w100",onSubmit:function(e){p(!1),e.preventDefault();var t=y(),r=q(C),s=e.target.newFileName.value;r.name=s,r.id=t;var c=L(C);a(Object(h.a)(Object(h.a)({},n),{},Object(u.a)({},t,c))),l(Object(h.a)(Object(h.a)({},i),{},Object(u.a)({},r.id,r.name))),S(r)},children:[Object(E.jsxs)("div",{className:"w100",children:[Object(E.jsx)("span",{children:"New file name:"}),Object(E.jsx)("input",{type:"text",name:"newFileName",className:"underline w100",placeholder:C.name})]}),Object(E.jsxs)("div",{className:"w100",style:{marginTop:"1em"},children:[Object(E.jsx)("button",{className:"cancelBtn",style:{width:"50%"},onClick:function(){p(!1)},children:"Cancel"}),Object(E.jsx)("button",{type:"submit",className:"saveBtn",style:{width:"50%"},children:"Save"})]})]})})]})};n(136),n(137),n(138),n(139);var Q=function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(K,{})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};d.a.render(Object(E.jsx)(l.a.StrictMode,{children:Object(E.jsx)(Q,{})}),document.getElementById("root")),Y()},32:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){}},[[140,1,2]]]);
//# sourceMappingURL=main.bb678936.chunk.js.map